<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AudioPlan - Interactive Dashboard</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Google Fonts: Inter -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        body { font-family: 'Inter', sans-serif; }
        
        /* --- FLIP CARD MECHANICS --- */
        .perspective-1000 {
            perspective: 1000px;
        }

        .flip-card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.8s;
            transform-style: preserve-3d;
        }

        /* Class toggled by JS to trigger flip */
        .flip-card-inner.flipped {
            transform: rotateY(180deg);
        }

        .flip-card-front, .flip-card-back {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden; /* Safari */
            backface-visibility: hidden;
            border-radius: 0.5rem; /* rounded-lg */
            /* Important: background helps hide the backface */
            background-color: white; 
        }

        .flip-card-back {
            transform: rotateY(180deg);
        }

        /* Scrollbar custom */
        ::-webkit-scrollbar { width: 4px; height: 4px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        .hide-scrollbar::-webkit-scrollbar { display: none; }
        .hide-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

        .animate-in { animation: fadeIn 0.5s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 min-h-screen flex flex-col">

    <!-- Header Navigation -->
    <nav class="border-b border-slate-200 bg-white sticky top-0 z-50 shadow-sm flex-none">
        <div class="max-w-7xl mx-auto px-6 h-16 flex items-center justify-between">
            <div class="flex items-center gap-2 font-bold text-slate-900 tracking-tight text-lg cursor-pointer" onclick="goBack()">
                <div class="w-6 h-6 bg-slate-900 text-white flex items-center justify-center text-xs rounded-sm">AP</div>
                AUDIOPLAN <span class="text-slate-400 font-normal hidden sm:inline">| CAMPAIGN MANAGER</span>
            </div>
            <div class="text-xs font-mono text-slate-500">
                SESSION: #8492-AD
            </div>
        </div>
    </nav>

    <!-- Conteneur Principal -->
    <main id="app" class="flex-grow w-full max-w-7xl mx-auto p-4 lg:p-8">
        <!-- Injection JS -->
    </main>

    <!-- Scripts Logique -->
    <script>
        // --- DONNÉES ---
        const items = [
            {
                id: 1,
                number: "01",
                title: "Transfert",
                host: "Slate Audio",
                imageUrl: "https://is1-ssl.mzstatic.com/image/thumb/Podcasts116/v4/7d/45/24/7d4524f1-f633-6535-1ceb-25c1ec067e39/mza_2287600864311144759.jpg/1200x1200bf-60.jpg",
                category: "Society",
                scores: { performance: 88, pertinence: 95, reach: 62 },
                description: "Le format intime par excellence qui crée une relation de confiance rare. Les auditeurs sont captifs, générant un environnement de 'Deep Attention'.",
                tags: ["Storytelling", "Intime", "CSP+"],
                audience: { age: "25-45 ans", sex: "65% F", csp: "CSP+ Urbain" },
                channels: ["Podcast", "Web"],
                similar: [{ title: "Les Pieds sur Terre", host: "France Culture" }],
                safetyIndex: 3 
            },
            {
                id: 2,
                number: "02",
                title: "HugoDecrypte",
                host: "Hugo Travers",
                imageUrl: "https://pbs.twimg.com/media/E9foLABX0AIC8UZ.jpg",
                videoThumbnail: "https://img.youtube.com/vi/beKEG7XSMFs/maxresdefault.jpg",
                videoLink: "https://www.youtube.com/watch?v=beKEG7XSMFs", 
                category: "News",
                scores: { performance: 76, pertinence: 65, reach: 98 },
                description: "Une puissance de frappe massive pour toucher les 15-34 ans rapidement. Le format 'Actus du jour' garantit une récurrence d'écoute quotidienne.",
                tags: ["Gen Z", "News", "Mass Market"],
                audience: { age: "15-34 ans", sex: "50% H", csp: "Étudiants" },
                channels: ["Podcast", "YouTube", "TikTok"],
                similar: [{ title: "Brut.", host: "News" }],
                safetyIndex: 1
            },
            {
                id: 3,
                number: "03",
                title: "Génération Do It Yourself",
                host: "Mathieu Stefani",
                imageUrl: "https://i.scdn.co/image/ab6765630000ba8ae1325ea6e500ddcc8ec266e9",
                category: "Business",
                scores: { performance: 92, pertinence: 90, reach: 74 },
                description: "La référence absolue pour cibler les décideurs et entrepreneurs. L'engagement est maximisé par la durée longue des épisodes.",
                tags: ["Business", "Makers"],
                audience: { age: "30-55 ans", sex: "80% H", csp: "Cadres Sup." },
                channels: ["Podcast", "YouTube", "LinkedIn"],
                similar: [{ title: "Le Panier", host: "E-commerce" }],
                safetyIndex: 2
            },
            {
                id: 4,
                number: "04",
                title: "Art le pouvoir des plantes",
                host: "Meilland",
                imageUrl: "https://yt3.ggpht.com/ytc/AIdro_kbS2cegk2Hk9EtmQEehYDoxNAsh_I3zEkVm4pJxUBw5C4=s800-c-k-c0x00ffffff-no-rj",
                category: "Jardin",
                scores: { performance: 81, pertinence: 88, reach: 45 },
                description: "Des astuces d'experts reconnus pour l'entretien des vivaces et des rosiers. La cible est passionnée et dispose d'un fort pouvoir d'achat.",
                tags: ["Nature", "Jardinage", "Expert"],
                audience: { age: "40-65 ans", sex: "60% F", csp: "Propriétaires" },
                channels: ["YouTube"],
                similar: [{ title: "Silence ça pousse", host: "TV" }],
                safetyIndex: 1
            },
            {
                id: 5,
                number: "05",
                title: "f1rcx",
                host: "Philippe",
                imageUrl: "https://yt3.ggpht.com/NK9tjpwfqdEj3-vjg_9o3j20s4sgxgPBpa-8mBvUh5wRTxs_kbrWOC2kbqrWbekmtFckQwHTbA=s800-c-k-c0x00ffffff-no-rj",
                category: "Jardin",
                scores: { performance: 79, pertinence: 85, reach: 30 },
                description: "Des conseils authentiques de semis et plantation, filmés 'les mains dans la terre'. Une très forte communauté engagée.",
                tags: ["Authentique", "Potager", "Tuto"],
                audience: { age: "35-60 ans", sex: "55% H", csp: "Ruraux/Péri-urbains" },
                channels: ["YouTube"],
                similar: [{ title: "Rustica", host: "Presse" }],
                safetyIndex: 1
            },
            {
                id: 11,
                number: "11",
                title: "Ecorama",
                host: "Audion",
                imageUrl: "https://artworks.360.audion.fm/5c3320ed-5932-4418-8f9f-3e204f2059f0.jpg?width=3000&height=3000",
                category: "Travel/Eco",
                scores: { performance: 85, pertinence: 70, reach: 60 },
                description: "Une analyse économique pointue du secteur tourisme. Un contenu hybride B2B/B2C très informatif et sérieux.",
                tags: ["Économie", "Tourisme", "Analyse"],
                audience: { age: "25-50 ans", sex: "60% H", csp: "CSP+" },
                channels: ["Podcast"],
                similar: [{ title: "BFM Business", host: "Radio" }],
                safetyIndex: 1
            },
            {
                id: 12,
                number: "12",
                title: "Magic Ears",
                host: "Disney Fans",
                imageUrl: "https://artworks.360.audion.fm/cbc8cd0d-bd61-47fe-83a1-1b50ae6af3b3.jpg?width=3000&height=3000",
                category: "Parcs",
                scores: { performance: 88, pertinence: 95, reach: 40 },
                description: "Le podcast immersif de référence sur l'univers Disney et ses parcs. Il rassemble une audience de 'Superfans'.",
                tags: ["Disney", "Fanbase", "Famille"],
                audience: { age: "20-40 ans", sex: "60% F", csp: "Jeunes Actifs" },
                channels: ["Podcast"],
                similar: [{ title: "Rien que d'y penser", host: "Podcast" }],
                safetyIndex: 1
            },
            {
                id: 13,
                number: "13",
                title: "Hello Maureen",
                host: "Maureen",
                imageUrl: "https://yt3.ggpht.com/v9vm8fDgS5-2MOIK7qHz-6nDbXjKD03Xul8oAhWs6NIpSL1yA3l2W4M7rGCuH2KpG7EHrX58dQ=s800-c-k-c0x00ffffff-no-rj",
                category: "Vlog Voyage",
                scores: { performance: 91, pertinence: 85, reach: 75 },
                description: "Des vlogs dynamiques et esthétiques sur les parcs californiens et la culture US. Excellente qualité visuelle.",
                tags: ["Lifestyle", "Voyage", "USA"],
                audience: { age: "18-35 ans", sex: "70% F", csp: "Étudiants/Actifs" },
                channels: ["YouTube"],
                similar: [{ title: "Sparkdise", host: "Influencer" }],
                safetyIndex: 1
            }
        ];

        // Musique séparée pour le moodboard horizontal
        const musicItems = [
            { id: 100, title: "Bohemian Rhapsody", host: "Queen", imageUrl: "https://i.discogs.com/hj4cMUuf_0C6oKkoblTAgx6oUuB_ueko42FojeYnidmc/rs:fit/g:sm/q:90/h:600/w:600/czM6Ly9kaXNjb2dz/LWRhdGFiYXNlLWlt/YWdlcy9SLTYwODE4/NjUtMTQ2MjUyNjg3/OC03OTk5LmpwZWc.jpeg" },
            { id: 101, title: "Imagine", host: "John Lennon", imageUrl: "https://i.scdn.co/image/ab67616d0000b2738b52c6b9bc4e43d873869699" },
            { id: 102, title: "Billie Jean", host: "Michael Jackson", imageUrl: "https://i.scdn.co/image/ab67616d0000b2734121faee8df82c526cbab2be" },
            { id: 103, title: "Smells Like Teen Spirit", host: "Nirvana", imageUrl: "https://i.scdn.co/image/ab67616d0000b273e175a19e530c898d167d39bf" },
            { id: 108, title: "Hotel California", host: "Eagles", imageUrl: "https://upload.wikimedia.org/wikipedia/en/4/49/Hotelcalifornia.jpg" }
        ];

        let state = { view: 'dashboard', selectedId: null };

        // --- COMPONENTS UTILS ---

        function getChannelIcon(channel) {
            const map = {
                'Podcast': 'mic',
                'YouTube': 'youtube',
                'TikTok': 'smartphone',
                'LinkedIn': 'briefcase',
                'Web': 'globe'
            };
            return map[channel] || 'circle';
        }

        function getConcentricCirclesHTML(scores, size = 100) {
            const center = size / 2;
            const strokeWidth = 6;
            const r1 = (size/2) - 8;
            const r2 = r1 - 12;
            const r3 = r2 - 12;
            const c1 = 2 * Math.PI * r1;
            const c2 = 2 * Math.PI * r2;
            const c3 = 2 * Math.PI * r3;
            const o1 = c1 - (scores.reach / 100) * c1;
            const o2 = c2 - (scores.pertinence / 100) * c2;
            const o3 = c3 - (scores.performance / 100) * c3;

            return `
                <div class="relative w-[${size}px] h-[${size}px]">
                    <svg class="w-full h-full transform -rotate-90" viewBox="0 0 ${size} ${size}">
                        <circle cx="${center}" cy="${center}" r="${r1}" stroke="#f1f5f9" stroke-width="${strokeWidth}" fill="transparent" />
                        <circle cx="${center}" cy="${center}" r="${r2}" stroke="#f1f5f9" stroke-width="${strokeWidth}" fill="transparent" />
                        <circle cx="${center}" cy="${center}" r="${r3}" stroke="#f1f5f9" stroke-width="${strokeWidth}" fill="transparent" />
                        <circle cx="${center}" cy="${center}" r="${r1}" stroke="#0f172a" stroke-width="${strokeWidth}" fill="transparent" stroke-dasharray="${c1}" stroke-dashoffset="${o1}" stroke-linecap="round" />
                        <circle cx="${center}" cy="${center}" r="${r2}" stroke="#4f46e5" stroke-width="${strokeWidth}" fill="transparent" stroke-dasharray="${c2}" stroke-dashoffset="${o2}" stroke-linecap="round" />
                        <circle cx="${center}" cy="${center}" r="${r3}" stroke="#0ea5e9" stroke-width="${strokeWidth}" fill="transparent" stroke-dasharray="${c3}" stroke-dashoffset="${o3}" stroke-linecap="round" />
                    </svg>
                    <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
                        <span class="text-xs font-bold text-slate-900">${Math.round((scores.performance + scores.pertinence + scores.reach)/3)}%</span>
                    </div>
                </div>
            `;
        }

        // --- FLIP LOGIC ---
        window.toggleFlip = function(element) {
            // Trouve l'élément enfant 'flip-card-inner' et toggle la classe 'flipped'
            const inner = element.querySelector('.flip-card-inner');
            if(inner) {
                inner.classList.toggle('flipped');
            }
        };

        // --- DASHBOARD VIEW ---
        function getDashboardHTML() {
            const cardsHTML = items.map(item => `
                <div class="group h-[360px] w-full perspective-1000 cursor-pointer animate-in" onclick="toggleFlip(this)">
                    <div class="flip-card-inner duration-500 shadow-sm hover:shadow-xl rounded-lg">
                        
                        <!-- RECTO: Image + Titre uniquement -->
                        <!-- IMPORTANT: Removed 'relative' class to let CSS 'absolute' work for stacking -->
                        <div class="flip-card-front bg-white rounded-lg overflow-hidden border border-slate-200">
                            <img src="${item.imageUrl}" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110" alt="${item.title}">
                            
                            <!-- Full Overlay Centered -->
                            <div class="absolute inset-0 bg-black/30 group-hover:bg-black/50 transition-colors flex flex-col justify-center items-center p-6 text-center">
                                <span class="text-xs font-bold text-indigo-300 mb-2 tracking-widest uppercase border border-indigo-400/30 px-2 py-0.5 rounded-full bg-black/20 backdrop-blur-sm">#${item.number}</span>
                                <h3 class="text-2xl font-bold text-white mb-1 drop-shadow-md leading-tight">${item.title}</h3>
                                <p class="text-sm text-slate-200 font-medium tracking-wide">${item.host}</p>
                            </div>

                            <!-- Indication visuelle de flip -->
                            <div class="absolute top-4 right-4 w-8 h-8 bg-black/20 backdrop-blur-md rounded-full flex items-center justify-center border border-white/20 text-white opacity-70 group-hover:opacity-100 transition-opacity">
                                <i data-lucide="refresh-cw" class="w-4 h-4"></i>
                            </div>
                        </div>

                        <!-- VERSO: Infos + Lien Détail -->
                        <!-- IMPORTANT: Removed 'relative' class here too -->
                        <div class="flip-card-back bg-white rounded-lg overflow-hidden border border-slate-200 flex flex-col">
                            <!-- Header Verso -->
                            <div class="p-4 bg-slate-50 border-b border-slate-100 flex justify-between items-center">
                                <div class="font-bold text-slate-900 truncate pr-2">${item.title}</div>
                                <div class="text-[10px] font-bold uppercase tracking-widest text-slate-400 bg-white px-2 py-1 border border-slate-200 rounded-sm">
                                    ${item.category}
                                </div>
                            </div>

                            <!-- Body Verso -->
                            <div class="p-4 flex-grow overflow-y-auto text-left flex flex-col gap-4">
                                <p class="text-xs text-slate-600 leading-relaxed">
                                    ${item.description}
                                </p>
                                
                                <div class="flex items-center gap-4">
                                    ${getConcentricCirclesHTML(item.scores, 60)}
                                    <div class="flex flex-col gap-1 text-[10px]">
                                        <div class="flex items-center gap-1"><div class="w-2 h-2 rounded-full bg-slate-900"></div> Reach: ${item.scores.reach}%</div>
                                        <div class="flex items-center gap-1"><div class="w-2 h-2 rounded-full bg-indigo-600"></div> Pertinence: ${item.scores.pertinence}%</div>
                                        <div class="flex items-center gap-1"><div class="w-2 h-2 rounded-full bg-sky-500"></div> Perf: ${item.scores.performance}%</div>
                                    </div>
                                </div>

                                <div class="flex flex-wrap gap-1 mt-auto">
                                    ${item.tags.map(t => `<span class="px-2 py-0.5 bg-slate-100 text-slate-500 text-[9px] font-bold uppercase rounded-sm">${t}</span>`).join('')}
                                </div>
                            </div>

                            <!-- Footer Verso avec Bouton -->
                            <div class="p-4 border-t border-slate-100 bg-slate-50 mt-auto">
                                <button onclick="event.stopPropagation(); openDetail(${item.id})" class="w-full py-2 bg-indigo-600 hover:bg-indigo-700 text-white text-xs font-bold uppercase tracking-widest rounded-sm transition-colors flex items-center justify-center gap-2 shadow-sm">
                                    Voir la fiche <i data-lucide="arrow-right" class="w-3 h-3"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            `).join('');

            const musicHTML = musicItems.map(m => `
                <div class="flex-none w-32 group cursor-pointer">
                    <div class="aspect-square rounded-md overflow-hidden relative mb-2 shadow-md">
                        <img src="${m.imageUrl}" class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-500">
                        <div class="absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center">
                            <i data-lucide="play" class="w-8 h-8 text-white fill-current"></i>
                        </div>
                    </div>
                    <p class="text-xs font-bold text-slate-300 truncate group-hover:text-white transition-colors">${m.title}</p>
                    <p class="text-[10px] text-slate-500 truncate">${m.host}</p>
                </div>
            `).join('');

            return `
                <div class="animate-in pb-12">
                    <!-- Header Dashboard -->
                    <div class="flex flex-col md:flex-row justify-between items-end mb-8 gap-4">
                        <div>
                            <h1 class="text-2xl font-bold text-slate-900 uppercase tracking-tight">Inventaire Média</h1>
                            <p class="text-sm text-slate-500 mt-1">Cliquez sur une carte pour révéler les détails.</p>
                        </div>
                        <div class="flex gap-3">
                            <button class="px-4 py-2 bg-slate-900 text-white text-xs font-bold uppercase tracking-widest hover:bg-slate-800 transition-colors rounded-sm shadow-md">
                                Valider la sélection
                            </button>
                        </div>
                    </div>

                    <!-- Grid Cards (Recto-Verso) -->
                    <!-- MODIFIED: lg:grid-cols-4 instead of lg:grid-cols-3 -->
                    <section class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
                        ${cardsHTML}
                    </section>

                    <!-- Music Moodboard (Footer) -->
                    <section class="bg-slate-900 rounded-lg p-6 border border-slate-800">
                        <h3 class="text-sm font-bold text-white uppercase tracking-widest mb-4 flex items-center gap-2">
                            <i data-lucide="music" class="w-4 h-4 text-indigo-400"></i> Ambiance Musicale
                        </h3>
                        <div class="flex overflow-x-auto gap-4 pb-2 hide-scrollbar">
                            ${musicHTML}
                        </div>
                    </section>
                </div>
            `;
        }

        // --- DETAIL VIEW ---
        function getDetailHTML(item) {
            return `
                <div class="animate-in max-w-5xl mx-auto pb-12">
                    <!-- Fil d'ariane -->
                    <button onclick="goBack()" class="mb-6 flex items-center gap-2 text-xs font-bold uppercase tracking-widest text-slate-500 hover:text-indigo-600 transition-colors">
                        <i data-lucide="arrow-left" class="w-4 h-4"></i> Retour au Dashboard
                    </button>

                    <div class="bg-white border border-slate-200 rounded-lg shadow-sm overflow-hidden">
                        <!-- Hero Banner -->
                        <div class="h-64 relative">
                            <img src="${item.imageUrl}" class="w-full h-full object-cover">
                            <div class="absolute inset-0 bg-gradient-to-t from-black/80 to-transparent"></div>
                            <div class="absolute bottom-0 left-0 p-8">
                                <span class="bg-indigo-600 text-white text-[10px] font-bold uppercase tracking-widest px-2 py-1 rounded-sm mb-3 inline-block">
                                    ${item.category}
                                </span>
                                <h1 class="text-4xl font-bold text-white mb-2">${item.title}</h1>
                                <p class="text-lg text-slate-300 font-medium">${item.host}</p>
                            </div>
                        </div>

                        <div class="grid grid-cols-1 lg:grid-cols-3">
                            <!-- Left Sidebar -->
                            <div class="p-8 border-r border-slate-100 bg-slate-50 lg:col-span-1 space-y-8">
                                <div>
                                    <h3 class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-4">Performance</h3>
                                    <div class="flex justify-center mb-4">
                                        ${getConcentricCirclesHTML(item.scores, 140)}
                                    </div>
                                    <div class="grid grid-cols-3 gap-2 text-center">
                                        <div class="bg-white p-2 rounded border border-slate-200">
                                            <div class="text-[10px] text-slate-400 uppercase">Reach</div>
                                            <div class="font-bold text-slate-900">${item.scores.reach}</div>
                                        </div>
                                        <div class="bg-white p-2 rounded border border-slate-200">
                                            <div class="text-[10px] text-slate-400 uppercase">Pert.</div>
                                            <div class="font-bold text-slate-900">${item.scores.pertinence}</div>
                                        </div>
                                        <div class="bg-white p-2 rounded border border-slate-200">
                                            <div class="text-[10px] text-slate-400 uppercase">Perf.</div>
                                            <div class="font-bold text-slate-900">${item.scores.performance}</div>
                                        </div>
                                    </div>
                                </div>

                                <div>
                                    <h3 class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-4">Audience</h3>
                                    <ul class="space-y-3 text-sm">
                                        <li class="flex justify-between border-b border-slate-200 pb-2">
                                            <span class="text-slate-500">Age Moyen</span>
                                            <span class="font-bold text-slate-900">${item.audience.age}</span>
                                        </li>
                                        <li class="flex justify-between border-b border-slate-200 pb-2">
                                            <span class="text-slate-500">Sexe</span>
                                            <span class="font-bold text-slate-900">${item.audience.sex}</span>
                                        </li>
                                        <li class="flex justify-between border-b border-slate-200 pb-2">
                                            <span class="text-slate-500">CSP</span>
                                            <span class="font-bold text-slate-900">${item.audience.csp}</span>
                                        </li>
                                    </ul>
                                </div>
                            </div>

                            <!-- Main Content -->
                            <div class="p-8 lg:col-span-2 space-y-8">
                                <div>
                                    <h3 class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-4">Analyse Stratégique</h3>
                                    <p class="text-slate-700 leading-relaxed text-lg">
                                        ${item.description}
                                    </p>
                                </div>

                                <div>
                                    <h3 class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-4">Canaux de diffusion</h3>
                                    <div class="flex gap-3">
                                        ${item.channels.map(c => `
                                            <div class="flex items-center gap-2 bg-white border border-slate-200 px-4 py-2 rounded-md shadow-sm">
                                                <i data-lucide="${getChannelIcon(c)}" class="w-4 h-4 text-indigo-600"></i>
                                                <span class="text-sm font-bold text-slate-700">${c}</span>
                                            </div>
                                        `).join('')}
                                    </div>
                                </div>

                                ${item.videoLink ? `
                                    <div>
                                        <h3 class="text-xs font-bold text-slate-400 uppercase tracking-widest mb-4">Extrait Vidéo</h3>
                                        <a href="${item.videoLink}" target="_blank" class="block group relative rounded-lg overflow-hidden shadow-md w-full max-w-md aspect-video">
                                            <img src="${item.videoThumbnail}" class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500">
                                            <div class="absolute inset-0 bg-black/40 flex items-center justify-center group-hover:bg-black/30 transition-colors">
                                                <div class="w-16 h-16 bg-white rounded-full flex items-center justify-center shadow-lg transform group-hover:scale-110 transition-transform">
                                                    <i data-lucide="play" class="w-6 h-6 text-slate-900 ml-1"></i>
                                                </div>
                                            </div>
                                        </a>
                                    </div>
                                ` : ''}

                                <div class="pt-8 border-t border-slate-100 flex gap-4">
                                    <button class="flex-1 py-3 bg-slate-900 text-white text-sm font-bold uppercase tracking-widest hover:bg-slate-800 rounded-sm transition-colors shadow-lg">
                                        Ajouter au plan média
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
        }

        // --- CORE ---
        function render() {
            const app = document.getElementById('app');
            app.innerHTML = '';
            
            if (state.view === 'dashboard') {
                app.innerHTML = getDashboardHTML();
            } else if (state.view === 'detail') {
                const item = items.find(i => i.id === state.selectedId);
                if (item) app.innerHTML = getDetailHTML(item);
            }
            
            lucide.createIcons();
            window.scrollTo(0,0);
        }

        window.openDetail = function(id) {
            state.view = 'detail';
            state.selectedId = id;
            render();
        };

        window.goBack = function() {
            state.view = 'dashboard';
            state.selectedId = null;
            render();
        };

        render();
    </script>
</body>
</html>